<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Events Calendar</title>
<style>
body{font-family:Arial;margin:0;padding:40px;background:#002147;color:#fff;text-align:center;}
header{margin-bottom:30px;position:relative;}
header img.logo-left,header img.logo-right{width:100px;position:absolute;top:20px;}
header img.logo-left{left:20px;}
header img.logo-right{right:20px;}
header img.logo-center{width:160px;display:block;margin:0 auto 10px auto;}
h1,h2,h3{color:#FFD700;margin:5px 0;}
.btn{display:inline-block;background:#FFD700;color:#000;font-weight:bold;padding:10px 20px;border-radius:6px;margin:6px;cursor:pointer;border:none;}
.btn-danger{background:#800000;color:#fff;}
table{width:90%;margin:20px auto;border-collapse:collapse;background:#1a1a1a;}
th,td{border:1px solid #333;padding:10px;}
th{background:#800000;color:#FFD700;}
form{background:#1a1a1a;padding:20px;border-radius:8px;margin:20px auto;width:90%;max-width:500px;display:none;}
input,textarea{width:100%;padding:8px;margin:6px 0;border-radius:4px;border:none;}
</style>
</head>
<body>

<header>
<img src="logo-left.png" class="logo-left">
<img src="logo-right.png" class="logo-right">
<img src="logo.png" class="logo-center">
<h1>Message Believer's Network Calendar</h1>
<h2>By The Distributor</h2>
</header>

<a href="members.html" class="btn">Members Area</a>
<button class="btn" onclick="toggleRequest()">Request Event</button>

<h3>Calendar Events</h3>
<table id="calendarTable">
<tr><th>Date</th><th>Event</th><th>Details</th><th>Host</th><th>Invite</th></tr>
</table>

<form id="requestForm">
<h3>Submit Event Request</h3>
<input id="reqUser" placeholder="Username" required>
<input type="password" id="reqPass" placeholder="Password" required>
<input type="date" id="reqDate" required>
<input id="reqEvent" placeholder="Event Name" required>
<textarea id="reqDetails" placeholder="Details" required></textarea>
<input id="reqHost" placeholder="Host Church" required>
<input id="reqInvite" placeholder="Invite URL (Optional)">
<button type="submit" class="btn">Submit</button>
</form>

<script>
let users=JSON.parse(localStorage.getItem("users")||"{}");
let events=JSON.parse(localStorage.getItem("events")||"[]");
let requests=JSON.parse(localStorage.getItem("requests")||"[]");

function renderCalendar(){
const table=document.getElementById("calendarTable");
table.innerHTML=`<tr><th>Date</th><th>Event</th><th>Details</th><th>Host</th><th>Invite</th></tr>`;
events.forEach(e=>{
table.innerHTML+=`<tr>
<td>${e.date}</td>
<td>${e.event}</td>
<td>${e.details}</td>
<td>${e.host}</td>
<td>${e.invite||""}</td>
</tr>`;
});
}
renderCalendar();

function toggleRequest(){
const f=document.getElementById("requestForm");
f.style.display=f.style.display==="none"?"block":"none";
}

document.getElementById("requestForm").addEventListener("submit",function(e){
e.preventDefault();
const u=reqUser.value;
const p=reqPass.value;

if(!users[u]||users[u].password!==p||!users[u].canRequestEvent){
alert("Invalid login or no permission.");
return;
}

requests.push({
username:u,
date:reqDate.value,
event:reqEvent.value,
details:reqDetails.value,
host:reqHost.value,
invite:reqInvite.value
});

localStorage.setItem("requests",JSON.stringify(requests));
alert("Request submitted.");
this.reset();
toggleRequest();
});
</script>
</body>
</html>
