<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Message Believer's Network Calendar</title>
<style>
body{font-family:Arial;margin:0;padding:40px;background:#002147;color:#fff;text-align:center;}
header{margin-bottom:30px;position:relative;}
header img.logo-left,header img.logo-right{width:100px;position:absolute;top:20px;}
header img.logo-left{left:20px;}
header img.logo-right{right:20px;}
header img.logo-center{width:160px;margin-bottom:10px;}
h1,h2,h3{color:#FFD700;margin:5px 0;}
.buttons{margin:20px 0;}
.btn{display:inline-block;background:#FFD700;color:#000;padding:10px 22px;border-radius:6px;margin:6px;cursor:pointer;font-weight:bold;text-decoration:none;border:none;}
.btn-danger{background:#800000;color:#fff;}
.dropdown{display:inline-block;position:relative;}
.dropdown-content{display:none;position:absolute;background:#1a1a1a;min-width:200px;border-radius:6px;z-index:1;}
.dropdown-content a{color:#FFD700;padding:10px;display:block;text-decoration:none;}
.dropdown-content a:hover{background:#333;color:#fff;}
.dropdown:hover .dropdown-content{display:block;}
table{width:95%;margin:20px auto;border-collapse:collapse;background:#1a1a1a;}
th,td{border:1px solid #333;padding:10px;}
th{background:#800000;color:#FFD700;}
form{display:none;background:#1a1a1a;padding:20px;border-radius:8px;width:90%;max-width:500px;margin:20px auto;}
input,textarea{width:100%;padding:8px;margin:6px 0;border-radius:4px;border:none;}
</style>
</head>
<body>

<header>
<img src="logo-left.png" class="logo-left">
<img src="logo-right.png" class="logo-right">
<img src="logo.png" class="logo-center">
<h1>Message Believer's Network Calendar</h1>
<h2>By The Distributor</h2>
</header>

<div class="buttons">
<a href="members.html" class="btn">Members</a>

<div class="dropdown">
<span class="btn">Live</span>
<div class="dropdown-content">
<a href="#">YouTube</a>
<a href="#">Facebook Live</a>
<a href="#">Podbean</a>
</div>
</div>

<div class="dropdown">
<span class="btn">Support Accounts</span>
<div class="dropdown-content">
<a href="#">WhatsApp</a>
<a href="#">Facebook</a>
<a href="#">TikTok</a>
</div>
</div>

<button class="btn" onclick="toggleRequest()">Request Event</button>
</div>

<h3>Calendar Events</h3>
<table id="calendarTable">
<tr><th>Date</th><th>Event</th><th>Details</th><th>Host</th><th>Invite</th><th></th></tr>
</table>

<form id="requestForm">
<h3>Submit Event Request</h3>
<input id="reqUser" placeholder="Username" required>
<input type="password" id="reqPass" placeholder="Password" required>
<input type="date" id="reqDate" required>
<input id="reqEvent" placeholder="Event Name" required>
<textarea id="reqDetails" placeholder="Details" required></textarea>
<input id="reqHost" placeholder="Host Church" required>
<input id="reqInvite" placeholder="Invite URL (optional)">
<button type="submit" class="btn">Submit Request</button>
</form>

<script>
if(!localStorage.getItem("users")){
localStorage.setItem("users",JSON.stringify({
admin1:{password:"admin123",role:"admin",active:true,canRequestEvent:true}
}));
}

let users=JSON.parse(localStorage.getItem("users"));
let events=JSON.parse(localStorage.getItem("events")||"[]");
let requests=JSON.parse(localStorage.getItem("requests")||"[]");

function renderCalendar(){
const table=document.getElementById("calendarTable");
table.innerHTML=`<tr><th>Date</th><th>Event</th><th>Details</th><th>Host</th><th>Invite</th><th></th></tr>`;
events.forEach((e,i)=>{
table.innerHTML+=`<tr>
<td>${e.date}</td>
<td>${e.event}</td>
<td>${e.details}</td>
<td>${e.host}</td>
<td>${e.invite||""}</td>
<td>${e.addedBy==="admin1"||users[e.addedBy]?.role==="admin"
?`<button class="btn btn-danger" onclick="removeEvent(${i})">Remove</button>`:""}
</td>
</tr>`;
});
}
renderCalendar();

function removeEvent(i){
if(confirm("Remove event?")){
events.splice(i,1);
localStorage.setItem("events",JSON.stringify(events));
renderCalendar();
}
}

function toggleRequest(){
const f=document.getElementById("requestForm");
f.style.display=f.style.display==="block"?"none":"block";
}

document.getElementById("requestForm").addEventListener("submit",function(e){
e.preventDefault();
const u=reqUser.value;
const p=reqPass.value;

if(!users[u]||users[u].password!==p||!users[u].canRequestEvent){
alert("Invalid login or no permission.");
return;
}

requests.push({
username:u,
date:reqDate.value,
event:reqEvent.value,
details:reqDetails.value,
host:reqHost.value,
invite:reqInvite.value
});

localStorage.setItem("requests",JSON.stringify(requests));
alert("Request submitted.");
this.reset();
toggleRequest();
});
</script>

</body>
</html>
