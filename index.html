<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Message Believers Network Calendar</title>

<style>
body { font-family: Arial; margin:0; padding:40px; background:#002147; color:#fff; }

header { text-align:center; position:relative; margin-bottom:30px; }

header img.logo-left { width:120px; position:absolute; left:0; top:25px; }
header img.logo-right { width:120px; position:absolute; right:0; top:25px; }
header img.logo-center { width:160px; display:block; margin:25px auto 15px auto; }

header h1, header h2 { color:#FFD700; margin:0; }

table { width:90%; margin:20px auto; border-collapse:collapse; background:#1a1a1a; }
th, td { border:1px solid #333; padding:12px; }
th { background:#800000; color:#FFD700; }

.btn {
  background:#FFD700;
  color:#000;
  padding:10px 20px;
  border:none;
  border-radius:6px;
  cursor:pointer;
  margin:5px;
  font-weight:bold;
}

#requestPanel { display:none; text-align:center; margin-top:20px; }
#requestPanel input { width:300px; padding:8px; margin:6px; }
</style>
</head>

<body>

<header>
<img src="logo-left.png" class="logo-left">
<img src="logo-right.png" class="logo-right">
<img src="logo.png" class="logo-center">
<h1>Message Believer's Network Calendar</h1>
<h2>By The Distributor</h2>
</header>

<div style="text-align:center;">
<button class="btn" onclick="toggleRequest()">Request Event</button>
<a href="members.html" class="btn">Members</a>
</div>

<div id="requestPanel">
<h3>Login To Request Event</h3>
<input id="reqUser" placeholder="Username">
<input id="reqPass" type="password" placeholder="Password"><br>
<button class="btn" onclick="loginForRequest()">Login</button>

<div id="eventForm" style="display:none;">
<input id="eventDate" type="date"><br>
<input id="eventTitle" placeholder="Event Name"><br>
<input id="eventDetails" placeholder="Details"><br>
<input id="eventHost" placeholder="Host Church"><br>
<input id="eventInvite" placeholder="Invitation Link"><br>
<button class="btn" onclick="submitEvent()">Submit Event</button>
</div>
</div>

<table id="eventsTable">
<tr>
<th>Date</th>
<th>Event</th>
<th>Details</th>
<th>Host Church</th>
<th>Invitation</th>
</tr>
</table>

<script>

/* HARD CODE ADMIN1 */
let users = JSON.parse(localStorage.getItem("users") || "{}");
if(!users["admin1"]){
  users["admin1"] = {
    password:"admin123",
    isAdmin:true,
    canRequestEvent:true,
    active:true
  };
  localStorage.setItem("users",JSON.stringify(users));
}

function getUsers(){ return JSON.parse(localStorage.getItem("users")||"{}"); }
function getPending(){ return JSON.parse(localStorage.getItem("pendingEvents")||"[]"); }
function getApproved(){ return JSON.parse(localStorage.getItem("approvedEvents")||"[]"); }
function savePending(p){ localStorage.setItem("pendingEvents",JSON.stringify(p)); }

let loggedUser=null;

function toggleRequest(){
  const panel=document.getElementById("requestPanel");
  panel.style.display = panel.style.display==="none"?"block":"none";
}

function loginForRequest(){
  const users=getUsers();
  const u=users[reqUser.value];
  if(u && u.password===reqPass.value && u.canRequestEvent && u.active){
    loggedUser=reqUser.value;
    document.getElementById("eventForm").style.display="block";
  } else alert("No permission.");
}

function submitEvent(){
  const pending=getPending();
  pending.push({
    date:eventDate.value,
    title:eventTitle.value,
    details:eventDetails.value,
    host:eventHost.value,
    invite:eventInvite.value
  });
  savePending(pending);
  alert("Submitted for approval.");
  document.getElementById("eventForm").reset;
}

function loadApproved(){
  const approved=getApproved();
  const table=document.getElementById("eventsTable");
  approved.forEach(e=>{
    table.innerHTML+=`
    <tr>
      <td>${e.date}</td>
      <td>${e.title}</td>
      <td>${e.details}</td>
      <td>${e.host}</td>
      <td><a href="${e.invite}" target="_blank">View Invite</a></td>
    </tr>`;
  });
}

loadApproved();

</script>
</body>
</html>
