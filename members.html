<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Members Area</title>

<style>
body {
  font-family: Arial, sans-serif;
  margin: 0;
  padding: 40px;
  background-color: #002147;
  color: #fff;
}

h1,h2,h3 { color:#FFD700; }

.btn {
  background:#FFD700;
  color:#000;
  padding:8px 14px;
  border:none;
  border-radius:6px;
  cursor:pointer;
  margin:5px 3px;
  font-weight:bold;
}

.btn-danger {
  background:#800000;
  color:#fff;
}

input, select {
  width:100%;
  padding:8px;
  margin:6px 0;
}

.container {
  max-width:1000px;
  margin:auto;
  background:#1a1a1a;
  padding:25px;
  border-radius:12px;
}

.member-grid {
  display:grid;
  grid-template-columns:repeat(auto-fill,minmax(220px,1fr));
  gap:20px;
  margin-top:20px;
}

.member-card {
  background:#262626;
  padding:15px;
  border-radius:10px;
  text-align:center;
}

.member-card img {
  width:100%;
  height:200px;
  object-fit:cover;
  border-radius:8px;
}
</style>
</head>

<body>

<div class="container">

<h1>Members Area</h1>

<!-- LOGIN -->
<div id="loginStage">
  <h2>Login</h2>
  <input id="username" placeholder="Username">
  <input id="password" type="password" placeholder="Password">
  <button class="btn" onclick="login()">Login</button>
</div>

<!-- MEMBERS -->
<div id="membersStage" style="display:none;">
  <button class="btn" onclick="logout()">Logout</button>

  <!-- ADMIN CONTROLS -->
  <div id="adminControls" style="display:none;">

    <h3>Add Member</h3>

    <input id="mName" placeholder="Name">
    <input id="mSurname" placeholder="Surname">
    <input id="mNumber" placeholder="Member Number">
    <input id="mTitle" placeholder="Title">
    <input id="mPhoto" type="file" accept="image/*">

    <h4>Visibility</h4>
    <label><input type="checkbox" id="vName" checked> Show Name</label><br>
    <label><input type="checkbox" id="vSurname" checked> Show Surname</label><br>
    <label><input type="checkbox" id="vTitle" checked> Show Title</label><br>
    <label><input type="checkbox" id="vNumber" checked> Show Number</label><br>
    <label><input type="checkbox" id="vPhoto" checked> Show Photo</label><br>

    <button class="btn" onclick="addMember()">Add Member</button>

    <hr>

    <h3>User Management</h3>

    <input id="newUsername" placeholder="Username">
    <input id="newPassword" placeholder="Password">
    <select id="newRole">
      <option value="member">Member</option>
      <option value="admin">Admin</option>
    </select>
    <button class="btn" onclick="addUser()">Add User</button>

    <div id="userList"></div>

    <hr>
  </div>

  <div class="member-grid" id="memberGrid"></div>
</div>

</div>

<script>

/* STORAGE */
function getUsers(){ return JSON.parse(localStorage.getItem("users")||"{}"); }
function saveUsers(u){ localStorage.setItem("users",JSON.stringify(u)); }

function getMembers(){ return JSON.parse(localStorage.getItem("members")||"[]"); }
function saveMembers(m){ localStorage.setItem("members",JSON.stringify(m)); }

/* INIT ADMINS */
if(!localStorage.getItem("users")){
  saveUsers({
    admin1:{password:"admin123",role:"admin",active:true},
    admin2:{password:"admin456",role:"admin",active:true}
  });
}

let role=null;

/* LOGIN */
function login(){
  const users=getUsers();
  const user=users[username.value];

  if(user && user.password===password.value && user.active){
    role=user.role;
    loginStage.style.display="none";
    membersStage.style.display="block";
    adminControls.style.display=role==="admin"?"block":"none";
    if(role==="admin") loadUsers();
    loadMembers();
  } else {
    alert("Invalid or disabled account");
  }
}

function logout(){
  role=null;
  membersStage.style.display="none";
  loginStage.style.display="block";
}

/* USER MANAGEMENT */
function addUser(){
  const users=getUsers();
  if(!newUsername.value || !newPassword.value){ alert("Required"); return; }
  users[newUsername.value]={password:newPassword.value,role:newRole.value,active:true};
  saveUsers(users);
  loadUsers();
  newUsername.value="";
  newPassword.value="";
}

function toggleUser(u){
  const users=getUsers();
  users[u].active=!users[u].active;
  saveUsers(users);
  loadUsers();
}

function loadUsers(){
  const users=getUsers();
  let html="<h4>Existing Users</h4>";
  Object.keys(users).forEach(u=>{
    html+=`${u} (${users[u].role}) - ${users[u].active?"Active":"Disabled"}
    <button class="btn btn-danger" onclick="toggleUser('${u}')">
    ${users[u].active?"Disable":"Enable"}
    </button><br>`;
  });
  userList.innerHTML=html;
}

/* MEMBERS */
function addMember(){
  if(!mPhoto.files[0]){ alert("Select photo"); return; }

  const reader=new FileReader();
  reader.onload=function(){
    const members=getMembers();
    members.push({
      name:mName.value,
      surname:mSurname.value,
      number:mNumber.value,
      title:mTitle.value,
      photo:reader.result,
      visibility:{
        name:vName.checked,
        surname:vSurname.checked,
        title:vTitle.checked,
        number:vNumber.checked,
        photo:vPhoto.checked
      }
    });
    saveMembers(members);
    loadMembers();
  };
  reader.readAsDataURL(mPhoto.files[0]);
}

function deleteMember(i){
  const members=getMembers();
  members.splice(i,1);
  saveMembers(members);
  loadMembers();
}

function loadMembers(){
  memberGrid.innerHTML="";
  getMembers().forEach((m,i)=>{
    const show=role==="admin"?{name:true,surname:true,title:true,number:true,photo:true}:m.visibility;

    memberGrid.innerHTML+=`
    <div class="member-card">
      ${show.photo?`<img src="${m.photo}">`:""}
      ${(show.name||show.surname)?`<h4>${show.name?m.name:""} ${show.surname?m.surname:""}</h4>`:""}
      ${show.title?`<p>${m.title}</p>`:""}
      ${show.number?`<small>Member No: ${m.number}</small>`:""}
      ${role==="admin"?`
      <button class="btn" onclick="deleteMember(${i})">Remove</button>`:""}
    </div>`;
  });
}

</script>

</body>
</html>
